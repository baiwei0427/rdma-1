\section{Introduction}

% background rdma etc.

Large cloud service providers like IBM, Microsoft and Google are increasingly
turning to remote DMA (RDMA) technology, to support applications such as cloud
storage~\cite{erasure-storage}, and distributed memory caches~\cite{farm} that
require high bandwidth and low latency, while minimizing CPU
overhead~\cite{tcp-bolt,dcqcn,timely}.

While there are many ways~\cite{ib-spec, rfc-iwarp,chelsio,rocve2} to enable
RDMA in a data center network, most large cloud service providers enable RDMA
over converged Ethernet (ROCEv2)~\cite{rocev2}, to ensure compatibility with
commodity Ethernet/IP hardware. 

For efficient operation, ROCEv2 needs to eliminate packet drops due to buffer
overflow in switches and routers. This is achieved by enabling Priority Flow
Control (PFC)~\cite{pfc}, and by using a suitable end-to-end congestion control
protocol for individual flows. Recently, a number of congestion control
protocols have been proposed for RDMA networks~\cite{tcp-bolt,dcqcn,timely}.  

% what we do.

In this paper, we analyze the two most recent proposals, namely
DCQCN~\cite{dcqcn}, and TIMELY~\cite{timely} focusing on their stability, rate
of convergence and fairness.

% why we do it.

One of our motivations for analyzing these protocols is their potential for
widespread deployment; given the rising interest in RDMA for high-throughput,
low-delay data center applications. DCQCN is implemented entirely in Mellanox
NICs, and drivers both Windows and Linux operating system are available from
Mellanox. Thus, anyone can deploy DCQCN in their data centers. While Google's
implementation of TIMELY is not publically available, the core timing
functionality it relies on is supported by most Mellanox NICs and their drivers. 

However, apart from this practical consideration, we are also driven by
scientific curiosity. DCQCN relies on ECN marking by switches to detect
congestion, while TIMELY uses changes in RTT as a congestion signal. This
naturally raises the question of how the performance of these two mechanisms
compares under high-speed, low-latency, drop-free data center networks.

% summary of difference from prior work.

While there has been a lot of prior work on design and analysis of ECN and
delay-based congestion control~\cite{ecn, tcp-vegas, Hollot:PIController}, with few
recent exceptions~\cite{dctcp-analysis, qcn-analysis} it was primarily done in
the context of wide area networks, and for TCP-like window-based congestion
control algorithms.  We also note that neither ECN-based, nor delay-based
congestion control has seen widespread deployment in the wide area Internet, due
a host of reasons. We are now seeing the first large-scale deployment of these
mechanisms, in a very different kind of environment - namely, the high-speed,
low-latency, drop-free (due to PFC~\cite{pfc}) data center networks, so this is
a ripe time for analytical exploration of these protocols.

% Methodology.

As in~\cite{dctcp-analysis, qcn-analysis}, we analyze DCQCN and TIMELY using
detailed fluid models and NS3 simulations. Fluid models are useful for analyzing
properties such as stability, and for rapid exploration of parameter space.
Simulations are useful when fluid models become intractable, or for studying
packet-level dynamics. The fluid model for DCQCN is known to be a good fit for
actual hardware implementation~\cite{dcqcn}. Since we do not have access to
TIMELY implementation, we relied on extensive discussion with authors
of~\cite{timely} to ensure that our fluid and simulation models are good
representations of the protocol. We plan to make available publically our NS3
simulation code, as well as Matlab code used to solve the fluid models.

% summary of contributions and findings.

The key contributions, and findings of this paper are as follows.

\para{DCQCN:} $(i)$ We extend the fluid model proposed in~\cite{dcqcn}. We
analytically show that DCQCN has a unique fixed point, where all flows get their
fair share. $(ii)$ We show that while DCQCN is generally stable around this
fixed point, stability gets worse as the feedback latency (i.e. RTT) goes up.
Curiously, we find that the stability is worst when around 10 flows are
competing on a single bottleneck. \textbf{IMPORTANT: ``10'' is a
  function of the current parameter choices. We should rephrase it to
  say the behavior is non-monotonic} DCQCN appears to be stable for very small, as
well as very large number of flows, even at higher latencies. $(iii)$ We propose
new parameter values to enhance DCQCN's stability, and we derive new parameter values
for higher bandwidth (100Gbps) links. $(iv)$ Using simulations, we explore the
convergence properties of DCQCN, and find that \fixme{fill in}.

\para{TIMELY:} $(i)$ We develop a fluid model for TIMELY. Using NS3 simulations,
we show that the fluid model is accurate. $(ii)$ simple analysis of the fluid model
reveals that TIMELY can have infinite fixed points -- and thus can have
arbitrary unfairness. We show that this behavior springs from the fact that
TIMELY uses changes in RTT gradient as a congestion signal.
Our simulations confirm the analysis. $(iii)$ Using NS3
simulations, we analyze TIMELY's behavior in further detail, revealing that
TIMELY's decision to not use hardware rate limiters is a double-edged sword that
can either help or hurt the performance, depending on the scenario. $(iv)$ We
propose a small fix to TIMELY that alleviates the stability problem. We verify
our fix via simulations.

Leveraging the insights from analysis of each protocol, we finally provide a
general comparison of the two approaches to the congestion control.

\fixme{todo(monia)}

General impression is that DCQCN is largely presented positive while noting some drawbacks about its instability. While TIMELY Sections/text pretty much start of with the things that don't work, including the section headings. nothing positive is said about TIMELY...

propose solid contributions such as improving the design of TIMELY to make it fair and stable. Big question is that if TIMELY can exhibit unfairness, what would be the change in the algorithm (or for that matter a completely new algorithm) that would make it fair? we should prescribe a well working RTT based congestion control, while noting the deficiencies of timely.

Timely paper is emphasizing on high precision delay as a good congestion signal, we should emphasize that RTT, when precisely measured, is still an indicator of network congestion and that a congestion control mechanism can be designed using RTT. we should downplay the exact algorithmic contributions of timely but there are other algorithms that have been studied very well in literature based on RTT such as FAST, Vegas, and NV.

also mention that from a pragmatic view point, generally in experiments the rates in gradient timely settle at fair shares and are stable. The reason is probably because there's always some disturbance/noise in experiments, so the gradient is never perfectly zero. For any non-zero gradient value the AIMD nature of timely should push the system towards fairness. I don't know how to show this with stability analysis, but it is certainly something to consider given that timely is working so well in practice.


Congestion control provides for a fundamental set of mechanisms to maintain stability, efficiency, and fairness at the same time. Congestion signal: ECN, RTT.

Dependency on parameters: It is always possible to tune congestion control parameters based on some knowledge of the environment and the application scenario. However, ... the fundamental challenge is whether it is possible to define one congestion control mechanism that operates reasonably well in a whole range of possible scenarios without need to tweak parameters on the fly...


On stability: control theory is a mathematical tool for describing dynamic systems. It lends itself to modeling congestion control -- TCP is a perfect example of a typical closed loop system that can be described in control theoretic terms. (say something about fluid model here). In control theory, there is a mathematically defined notion of system stability.  In a stable system, for any bounded input over any amount of time, the output will also be bounded.  For congestion control, what is actually meant by global  stability is typically asymptotic stability: a mechanism should converge to a certain state irrespective of the initial state of the network. Local stability means that if the system is perturbed from its stable state it will quickly return toward the locally stable state.


On fairness: 


On performance:

Congestion signal:

Feedback:



